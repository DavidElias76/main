<?php
if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    // Capture form data
    $name = htmlspecialchars($_POST['name']);
    $address = htmlspecialchars($_POST['address']);
    $seat = (int)$_POST['seat'];
    $boarding = htmlspecialchars($_POST['boarding']);
    $destination = htmlspecialchars($_POST['destination']);

    // Fare calculation (mock logic)
    $distance = rand(5, 20); // Simulating distance in kilometers
    $farePerKm = 2; // Fare per kilometer
    $totalFare = $distance * $farePerKm;

    // Display ticket
    echo "<h2>Bus Ticket</h2>";
    echo "<p><strong>Name:</strong> $name</p>";
    echo "<p><strong>Address:</strong> $address</p>";
    echo "<p><strong>Seat Number:</strong> $seat</p>";
    echo "<p><strong>Boarding Station:</strong> $boarding</p>";
    echo "<p><strong>Destination:</strong> $destination</p>";
    echo "<p><strong>Distance:</strong> $distance km</p>";
    echo "<p><strong>Total Fare:</strong> $$totalFare</p>";
    echo "<p>Thank you for choosing our bus service!</p>";
} else {
    echo "<p>Invalid request method.</p>";
}
?>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bus Ticket Booking</title>
    <style>
        fieldset{
            background-color: pink;
        }
    </style>
    <script>
        function validateform() {
    
        let a = document.frm.name.value; 
        let b = document.frm.address.value; 
        let c = document.frm.seat.value; 
        let d = document.frm.boarding.value; 
        let e = document.frm.destination.value; 


    // Check for each condition separately using if-else
        if (a === "") {
            alert("Name field is required.");
            document.frm.name.focus();
            return;
        } else if (b === "") {
            alert("Address field is required.");
            document.frm.address.focus();
            return;
        } else if (c < 1) {
            alert("Seat number must be greater than 0.");
            document.frm.seat.focus();
            return;
        } else if (d === "") {
            alert("Boarding station field is required.");
            document.frm.boarding.focus();
            return;
        } else if (e === "") {
            alert("Destination field is required.");
            document.frm.destination.focus();
            return ;
        } else if (d.toLowerCase() === e.toLowerCase()) {
            alert("Boarding station and destination cannot be the same.");
            return;
        } else {
            alert("Form submitted successfully!");
            return;
        }
}
    </script>
</head>
<body>
    <fieldset>
        <legend>Ticket Booking</legend>
        <form action="" name="frm" method="post" autocomplete="off">
            <label for="name">Passenger Name:</label>
            <input type="text" id="name" name="name" required>
            <br><br>
            <label for="address">Address:</label>
            <input type="text" id="address" name="address" required>
            <br><br>
            <label for="seat">Seat Number:</label>
            <input type="number" id="seat" name="seat" min="1" required>
            <br><br>
            <label for="boarding">Boarding Station:</label>
            <input type="text" id="boarding" name="boarding" required>
            <br><br>
            <label for="destination">Destination:</label>
            <input type="text" id="destination" name="destination" required>
            <br><br>
            <input type="button" value="Book Ticket" onclick="validateform()">
        
        </form>
</fieldset>
    
</body>
</html>